"use strict";(self.webpackChunkwik_ig=self.webpackChunkwik_ig||[]).push([[129],{2311:function(e,t,o){o.d(t,{Z:function(){return a}});var n=o(7294),s=o(5944),i="centeredImage_tWp1";function a(e){var t=e.alt,o=e.src,a=e.className;return a||(a=i),n.createElement(s.Z,{className:a,img:o,alt:t})}},6952:function(e,t,o){o.r(t),o.d(t,{frontMatter:function(){return l},contentTitle:function(){return u},metadata:function(){return p},toc:function(){return d},default:function(){return m}});var n=o(7462),s=o(3366),i=(o(7294),o(4137)),a=o(2311),r=["components"],l={sidebar_position:2,title:"Les webhooks"},u=void 0,p={unversionedId:"discord/plus-loin/les-webhooks",id:"discord/plus-loin/les-webhooks",title:"Les webhooks",description:"Vivement demand\xe9 par la communaut\xe9 (et surtout les d\xe9veloppeurs) il fut un temps, Discord d\xe9cida d'impl\xe9menter le syst\xe8me de webhook.",source:"@site/docs/discord/plus-loin/les-webhooks.mdx",sourceDirName:"discord/plus-loin",slug:"/discord/plus-loin/les-webhooks",permalink:"/wiki/docs/discord/plus-loin/les-webhooks",editUrl:"https://github.com/section-ig/wiki/edit/main/docs/discord/plus-loin/les-webhooks.mdx",tags:[],version:"current",sidebarPosition:2,frontMatter:{sidebar_position:2,title:"Les webhooks"},sidebar:"tutorialSidebar",previous:{title:"Les identifiants",permalink:"/wiki/docs/discord/plus-loin/les-identifiants"},next:{title:"Les int\xe9grations",permalink:"/wiki/docs/discord/plus-loin/les-embeds"}},d=[{value:"Etape 1 : comprendre ce qu&#39;est un webhook",id:"etape-1--comprendre-ce-quest-un-webhook",children:[],level:2},{value:"Etape 2 : mettre en place le webhook",id:"etape-2--mettre-en-place-le-webhook",children:[],level:2},{value:"Etape 3 : utiliser le webhook pour communiquer",id:"etape-3--utiliser-le-webhook-pour-communiquer",children:[],level:2}],c={toc:d};function m(e){var t=e.components,o=(0,s.Z)(e,r);return(0,i.kt)("wrapper",(0,n.Z)({},c,o,{components:t,mdxType:"MDXLayout"}),(0,i.kt)("p",null,"Vivement demand\xe9 par la communaut\xe9 (et surtout les d\xe9veloppeurs) il fut un temps, Discord d\xe9cida d'impl\xe9menter le syst\xe8me de webhook.\nNous n'allons pas nous emb\xeater \xe0 t'expliquer tout sur le webhook, Discord a tr\xe8s bien fait \xe7a.\nLis donc ",(0,i.kt)("a",{parentName:"p",href:"https://support.discordapp.com/hc/fr/articles/228383668"},"l'article \xe0 ce sujet")," !"),(0,i.kt)("h2",{id:"etape-1--comprendre-ce-quest-un-webhook"},"Etape 1 : comprendre ce qu'est un webhook"),(0,i.kt)("p",null,"Un webhook, c'est comme un tube pneumatique pour faire passer des messages d'un endroit \xe0 l'autre. Le premier endroit, ce serait l'",(0,i.kt)("strong",{parentName:"p"},"application que tu utilises")," pour ",(0,i.kt)("em",{parentName:"p"},"envoyer")," le webhook. L'endroit de destination, c'est un ",(0,i.kt)("strong",{parentName:"p"},"canal \xe9crit Discord"),". Le message, bah c'est le ",(0,i.kt)("strong",{parentName:"p"},"contenu du webhook")," (un message texte, ",(0,i.kt)("a",{parentName:"p",href:"les-embeds"},"une int\xe9gration"),", ...). Et le tube pneumatique, c'est l'",(0,i.kt)("strong",{parentName:"p"},"API de Discord"),"!"),(0,i.kt)("div",{style:{width:"100%",height:"0",paddingBottom:"43%",position:"relative"}},(0,i.kt)("iframe",{src:"https://giphy.com/embed/dblqyJOl4N4R2",width:"100%",height:"100%",style:{position:"absolute"},frameBorder:"0",class:"giphy-embed",allowFullScreen:!0})),(0,i.kt)("p",null,"Pour utiliser un webhook, tu as besoin de deux choses :"),(0,i.kt)("ol",null,(0,i.kt)("li",{parentName:"ol"},"son ID, qui permet \xe0 Discord de ",(0,i.kt)("strong",{parentName:"li"},"savoir sur quel tuyau le webhook pointe")," (pour envoyer le message) ;"),(0,i.kt)("li",{parentName:"ol"},"son token, qui permet de ",(0,i.kt)("strong",{parentName:"li"},"s'authentifier aupr\xe8s de Discord")," (\"coucou, c'est moi j'peux passer svp?\").")),(0,i.kt)("p",null,"Toute entit\xe9 n\xe9cessitant une authentification poss\xe8de donc un token (les webhooks, les bots et m\xeame toi en tant qu'utilisateur) et c'est ",(0,i.kt)("em",{parentName:"p"},"extr\xeamement")," pr\xe9cieux! Ne partage ",(0,i.kt)("strong",{parentName:"p"},"jamais")," ton token."),(0,i.kt)("p",null,"Maintenant que c'est dit, passons \xe0 la suite. Ces deux choses n\xe9cessaires se trouvent dans l'URL fourni par Discord lors de la cr\xe9ation du webhook. Lien URL qui ressemble \xe0 ce qui suit :"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre"},"https://discordapp.com/api/webhooks/472492847115927582/-r0SIJM4rOZ5aIrOrgtaPi1z1PByun1LwqcXRDcNH3LOfn3lERlMcJBHdTOgwNDQ5BuM\nhttps://discordapp.com/api/webhooks/        ID        /                              TOKEN\n")),(0,i.kt)("h2",{id:"etape-2--mettre-en-place-le-webhook"},"Etape 2 : mettre en place le webhook"),(0,i.kt)(a.Z,{src:"https://cdn.discordapp.com/attachments/497053799534559242/497097262070104065/webhook-etape1.gif",alt:"\xe9tape 1",mdxType:"Image"}),(0,i.kt)("h2",{id:"etape-3--utiliser-le-webhook-pour-communiquer"},"Etape 3 : utiliser le webhook pour communiquer"),(0,i.kt)("p",null,"L'API de Discord, majoritairement d\xe9velopp\xe9e en Python, transmet des donn\xe9es. Ces donn\xe9es sont donc g\xe9n\xe9ralement v\xe9hicul\xe9es \xe0 travers un format commun, qu'on appelle le ",(0,i.kt)("a",{parentName:"p",href:"https://fr.wikipedia.org/wiki/JavaScript_Object_Notation"},(0,i.kt)("strong",{parentName:"a"},"J"),"ava",(0,i.kt)("strong",{parentName:"a"},"S"),"cript ",(0,i.kt)("strong",{parentName:"a"},"O"),"bject ",(0,i.kt)("strong",{parentName:"a"},"N"),"otation"),". C'est la repr\xe9sentation en cha\xeene de caract\xe8res d'un objet en Javascript."),(0,i.kt)("ol",null,(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("p",{parentName:"li"},"Pour ",(0,i.kt)("em",{parentName:"p"},"construire")," un webhook, nous utilisons un outil de visualisation en ligne (",(0,i.kt)("a",{parentName:"p",href:"https://leovoel.github.io/embed-visualizer/"},"https://leovoel.github.io/embed-visualizer/"),")."),(0,i.kt)("p",{parentName:"li"},'\u26a0\ufe0f Il faut activer le "mode webhook" afin que le contenu JSON soit valide!')),(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("p",{parentName:"li"},"Pour ",(0,i.kt)("em",{parentName:"p"},"envoyer")," un webhook, nous utilisons une application qui permet d'\xe9mettre des ",(0,i.kt)("em",{parentName:"p"},"requ\xeates HTTP"),".\nNous utilisons ",(0,i.kt)("a",{parentName:"p",href:"https://insomnia.rest/"},"Insomnia")," mais il en existe d'autres, comme ",(0,i.kt)("a",{parentName:"p",href:"https://www.getpostman.com"},"Postman")," par exemple."))),(0,i.kt)("p",null,"Ci-apr\xe8s un tutoriel rapide avec Insomnia dans lequel nous r\xe9alisons une requ\xeate HTTP de type \"post\". En effet, nous envoyons l'objet JSON sur l'URL du webhook, ce dernier g\xe9rant le reste (comprendre l'objet re\xe7u, le traduire et ensuite l'afficher dans le canal sous forme d'un message lisible)."),(0,i.kt)(a.Z,{src:"https://cdn.discordapp.com/attachments/497053799534559242/497097572704321546/webhook-etape3bgif.gif",alt:"\xe9tape 3",mdxType:"Image"}))}m.isMDXComponent=!0}}]);